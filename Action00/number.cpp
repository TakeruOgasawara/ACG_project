//===============================================================================
//
// [number.h]
// Author : Takeru Ogasawara
//
//===============================================================================
#include "number.h"
#include "renderer.h"
#include "manager.h"
#include "object2D.h"
#include "texture.h"

//静的メンバ変数宣言
int CNumber::m_nTextureIdx = 0;

//===========================================================================================
// コンストラクタ
//===========================================================================================
CNumber::CNumber()
{
	m_pObject2D = nullptr;
}

//===========================================================================================
// デストラクタ
//===========================================================================================
CNumber::~CNumber()
{

}

//===========================================================================================
// テクスチャの読み込み
//===========================================================================================
HRESULT CNumber::Load(void)
{
	//デバイスの取得
	LPDIRECT3DDEVICE9 pDevice = CManager::GetInstance()->GetRenderer()->GetDevice();

	//テクスチャ情報の取得
	CTexture *pTexture = CManager::GetInstance()->GetTexture();

	//使いたいテクスチャ名を指定
	m_nTextureIdx = pTexture->Regist("data\\TEXTURE\\number\\number0.png");

	return S_OK;
}

//===========================================================================================
// 生成
//===========================================================================================
CNumber *CNumber::Create(D3DXVECTOR3 pos)
{
	CNumber *pNumber = nullptr;

	if (pNumber == nullptr)
	{
		//オブジェクト2Dの生成
		pNumber = new CNumber;

		if (pNumber != nullptr)
		{
			//初期化処理
			pNumber->Init(pos);
		}

		return pNumber;
	}

	return pNumber;
}

//===========================================================================================
// 初期化処理
//===========================================================================================
HRESULT CNumber::Init(D3DXVECTOR3 pos)
{
	Load();

	//インスタンス生成
	m_pObject2D = CObject2D::Create(pos);

	//サイズ設定
	m_pObject2D->SetSizeCenter(10.0f, 20.0f);

	//テクスチャ
	m_pObject2D->BindTexture(m_nTextureIdx);

	return S_OK;
}

//===========================================================================================
// 終了処理
//===========================================================================================
void CNumber::Uninit()
{
	if (m_pObject2D != nullptr)
	{
		m_pObject2D = nullptr;
	}
}

//===========================================================================================
// 更新処理
//===========================================================================================
void CNumber::Update()
{
	
}

//===========================================================================================
// 描画処理
//===========================================================================================
void CNumber::Draw()
{
	m_pObject2D->Draw();
}

//===========================================================================================
// 位置設定
//===========================================================================================
void CNumber::SetPosition(D3DXVECTOR3 pos)
{
	m_pObject2D->SetPosition(pos);
}

//===========================================================================================
// 向き設定
//===========================================================================================
void CNumber::SetRotation(D3DXVECTOR3 rot)
{
	m_pObject2D->SetRotation(rot);
}

//===========================================================================================
// サイズ設定
//===========================================================================================
void CNumber::SetSize(float fWidth, float fHeight)
{
	m_pObject2D->SetSizeCenter(fWidth, fHeight);
}

//===========================================================================================
// 情報取得
//===========================================================================================
CObject2D *CNumber::GetObject2D(void)
{
	return m_pObject2D;
}
